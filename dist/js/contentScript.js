(function(){"use strict";var le=function(e,t){return le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},le(e,t)};function fe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");le(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Wt(e,t,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):o(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}function Me(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],o=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function $(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function q(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function Gt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(m){r[m]&&(o[m]=function(E){return new Promise(function(p,h){s.push([m,E,p,h])>1||a(m,E)})})}function a(m,E){try{l(r[m](E))}catch(p){f(s[0][3],p)}}function l(m){m.value instanceof k?Promise.resolve(m.value.v).then(u,d):f(s[0][2],m)}function u(m){a("next",m)}function d(m){a("throw",m)}function f(m,E){m(E),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Xt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof $=="function"?$(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(i){return new Promise(function(a,l){i=e[s](i),o(a,l,i.done,i.value)})}}function o(s,i,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},i)}}typeof SuppressedError=="function"&&SuppressedError;function A(e){return typeof e=="function"}function Qt(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var de=Qt(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,o){return o+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function $e(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var he=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,o,s;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=$(i),l=a.next();!l.done;l=a.next()){var u=l.value;u.remove(this)}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else i.remove(this);var d=this.initialTeardown;if(A(d))try{d()}catch(h){s=h instanceof de?h.errors:[h]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var m=$(f),E=m.next();!E.done;E=m.next()){var p=E.value;try{qe(p)}catch(h){s=s??[],h instanceof de?s=q(q([],H(s)),H(h.errors)):s.push(h)}}}catch(h){r={error:h}}finally{try{E&&!E.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}}if(s)throw new de(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)qe(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&$e(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&$e(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();he.EMPTY;function He(e){return e instanceof he||e&&"closed"in e&&A(e.remove)&&A(e.add)&&A(e.unsubscribe)}function qe(e){A(e)?e():e.unsubscribe()}var ze={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},pe={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=pe.delegate;return o!=null&&o.setTimeout?o.setTimeout.apply(o,q([e,t],H(n))):setTimeout.apply(void 0,q([e,t],H(n)))},clearTimeout:function(e){var t=pe.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Je(e){pe.setTimeout(function(){throw e})}function Ve(){}function Yt(e){e()}var me=function(e){fe(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,He(n)&&n.add(r)):r.destination=nn,r}return t.create=function(n,r,o){return new be(n,r,o)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(he),Zt=Function.prototype.bind;function ye(e,t){return Zt.call(e,t)}var en=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Y(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Y(r)}else Y(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Y(n)}},e}(),be=function(e){fe(t,e);function t(n,r,o){var s=e.call(this)||this,i;if(A(n)||!n)i={next:n??void 0,error:r??void 0,complete:o??void 0};else{var a;s&&ze.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},i={next:n.next&&ye(n.next,a),error:n.error&&ye(n.error,a),complete:n.complete&&ye(n.complete,a)}):i=n}return s.destination=new en(i),s}return t}(me);function Y(e){Je(e)}function tn(e){throw e}var nn={closed:!0,next:Ve,error:tn,complete:Ve},we=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ke(e){return e}function rn(e){return e.length===0?Ke:e.length===1?e[0]:function(n){return e.reduce(function(r,o){return o(r)},n)}}var C=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var o=this,s=sn(t)?t:new be(t,n,r);return Yt(function(){var i=o,a=i.operator,l=i.source;s.add(a?a.call(s,l):l?o._subscribe(s):o._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=We(n),new n(function(o,s){var i=new be({next:function(a){try{t(a)}catch(l){s(l),i.unsubscribe()}},error:s,complete:o});r.subscribe(i)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[we]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return rn(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=We(t),new t(function(r,o){var s;n.subscribe(function(i){return s=i},function(i){return o(i)},function(){return r(s)})})},e.create=function(t){return new e(t)},e}();function We(e){var t;return(t=e??ze.Promise)!==null&&t!==void 0?t:Promise}function on(e){return e&&A(e.next)&&A(e.error)&&A(e.complete)}function sn(e){return e&&e instanceof me||on(e)&&He(e)}function an(e){return A(e==null?void 0:e.lift)}function z(e){return function(t){if(an(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function J(e,t,n,r,o){return new cn(e,t,n,r,o)}var cn=function(e){fe(t,e);function t(n,r,o,s,i,a){var l=e.call(this,n)||this;return l.onFinalize=i,l.shouldUnsubscribe=a,l._next=r?function(u){try{r(u)}catch(d){n.error(d)}}:e.prototype._next,l._error=s?function(u){try{s(u)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=o?function(){try{o()}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(me);function un(e){return e&&A(e.schedule)}function ln(e){return e[e.length-1]}function fn(e){return un(ln(e))?e.pop():void 0}var Ge=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Xe(e){return A(e==null?void 0:e.then)}function Qe(e){return A(e[we])}function Ye(e){return Symbol.asyncIterator&&A(e==null?void 0:e[Symbol.asyncIterator])}function Ze(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function dn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var et=dn();function tt(e){return A(e==null?void 0:e[et])}function nt(e){return Gt(this,arguments,function(){var n,r,o,s;return Me(this,function(i){switch(i.label){case 0:n=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,k(n.read())];case 3:return r=i.sent(),o=r.value,s=r.done,s?[4,k(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,k(o)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function rt(e){return A(e==null?void 0:e.getReader)}function V(e){if(e instanceof C)return e;if(e!=null){if(Qe(e))return hn(e);if(Ge(e))return pn(e);if(Xe(e))return mn(e);if(Ye(e))return ot(e);if(tt(e))return yn(e);if(rt(e))return bn(e)}throw Ze(e)}function hn(e){return new C(function(t){var n=e[we]();if(A(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pn(e){return new C(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function mn(e){return new C(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Je)})}function yn(e){return new C(function(t){var n,r;try{for(var o=$(e),s=o.next();!s.done;s=o.next()){var i=s.value;if(t.next(i),t.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()})}function ot(e){return new C(function(t){wn(e,t).catch(function(n){return t.error(n)})})}function bn(e){return ot(nt(e))}function wn(e,t){var n,r,o,s;return Wt(this,void 0,void 0,function(){var i,a;return Me(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Xt(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(i=r.value,t.next(i),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),o={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function L(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var s=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!o)return s}function st(e,t){return t===void 0&&(t=0),z(function(n,r){n.subscribe(J(r,function(o){return L(r,e,function(){return r.next(o)},t)},function(){return L(r,e,function(){return r.complete()},t)},function(o){return L(r,e,function(){return r.error(o)},t)}))})}function it(e,t){return t===void 0&&(t=0),z(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function gn(e,t){return V(e).pipe(it(t),st(t))}function En(e,t){return V(e).pipe(it(t),st(t))}function Sn(e,t){return new C(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function vn(e,t){return new C(function(n){var r;return L(n,t,function(){r=e[et](),L(n,t,function(){var o,s,i;try{o=r.next(),s=o.value,i=o.done}catch(a){n.error(a);return}i?n.complete():n.next(s)},0,!0)}),function(){return A(r==null?void 0:r.return)&&r.return()}})}function at(e,t){if(!e)throw new Error("Iterable cannot be null");return new C(function(n){L(n,t,function(){var r=e[Symbol.asyncIterator]();L(n,t,function(){r.next().then(function(o){o.done?n.complete():n.next(o.value)})},0,!0)})})}function On(e,t){return at(nt(e),t)}function An(e,t){if(e!=null){if(Qe(e))return gn(e,t);if(Ge(e))return Sn(e,t);if(Xe(e))return En(e,t);if(Ye(e))return at(e,t);if(tt(e))return vn(e,t);if(rt(e))return On(e,t)}throw Ze(e)}function ct(e,t){return t?An(e,t):V(e)}function ge(e,t){return z(function(n,r){var o=0;n.subscribe(J(r,function(s){r.next(e.call(t,s,o++))}))})}var Rn=Array.isArray;function xn(e,t){return Rn(t)?e.apply(void 0,q([],H(t))):e(t)}function Tn(e){return ge(function(t){return xn(e,t)})}function Pn(e,t,n,r,o,s,i,a){var l=[],u=0,d=0,f=!1,m=function(){f&&!l.length&&!u&&t.complete()},E=function(h){return u<r?p(h):l.push(h)},p=function(h){s&&t.next(h),u++;var w=!1;V(n(h,d++)).subscribe(J(t,function(b){o==null||o(b),s?E(b):t.next(b)},function(){w=!0},void 0,function(){if(w)try{u--;for(var b=function(){var v=l.shift();i?L(t,i,function(){return p(v)}):p(v)};l.length&&u<r;)b();m()}catch(v){t.error(v)}}))};return e.subscribe(J(t,E,function(){f=!0,m()})),function(){a==null||a()}}function Ee(e,t,n){return n===void 0&&(n=1/0),A(t)?Ee(function(r,o){return ge(function(s,i){return t(r,s,o,i)})(V(e(r,o)))},n):(typeof t=="number"&&(n=t),z(function(r,o){return Pn(r,o,e,n)}))}function Cn(e){return e===void 0&&(e=1/0),Ee(Ke,e)}function _n(){return Cn(1)}function Nn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _n()(ct(e,fn(e)))}function ut(e,t,n){return n?ut(e,t).pipe(Tn(n)):new C(function(r){var o=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.next(i.length===1?i[0]:i)},s=e(o);return A(t)?function(){return t(o,s)}:void 0})}function lt(e,t){return z(function(n,r){var o=0;n.subscribe(J(r,function(s){return e.call(t,s,o++)&&r.next(s)}))})}var jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ft={exports:{}};/*!
 * chrome-promise
 * https://github.com/tfoxy/chrome-promise
 *
 * Copyright 2015 Tomás Fox
 * Released under the MIT license
 */(function(e,t){(function(n,r){e.exports=r(this||n)})(typeof self<"u"?self:jn,function(n){var r=Array.prototype.slice,o=Object.prototype.hasOwnProperty;return s.default=s,s;function s(i){i=i||{};var a=i.chrome||n.chrome,l=i.Promise||n.Promise,u=a.runtime,d=this;if(!d)throw new Error("ChromePromise must be called with new keyword");m(a,d),a.permissions&&a.permissions.onAdded.addListener(E);function f(p,h){return function(){var w=r.call(arguments);return new l(function(b,v){w.push(T),p.apply(h,w);function T(){var B=u.lastError,ue=r.call(arguments);if(B)v(B);else switch(ue.length){case 0:b();break;case 1:b(ue[0]);break;default:b(ue)}}})}}function m(p,h){for(var w in p)if(o.call(p,w)){var b;try{b=p[w]}catch{continue}var v=typeof b;v==="object"&&!(b instanceof s)?(h[w]={},m(b,h[w])):v==="function"?h[w]=f(b,p):h[w]=b}}function E(p){if(p.permissions&&p.permissions.length){var h={};p.permissions.forEach(function(w){var b=/^[^.]+/.exec(w);b in a&&(h[b]=a[b])}),m(h,d)}}}})})(ft);var Ln=ft.exports,Un=Ln,Se=new Un;Se.default=Se;var kn=Se;const ve=Fn(kn),In=e=>{if(Array.isArray(e))return"Unexpected setter result value: Array";switch(typeof e){case"object":case"undefined":return;default:return`Unexpected setter return value: ${typeof e}`}};function Dn(e){return e!=null}const Bn=e=>{switch(e){case"local":return ve.storage.local;case"sync":return ve.storage.sync;case"managed":return ve.storage.managed;default:throw new TypeError('area must be "local" | "sync" | "managed"')}};function Z(e,t){t||(t="local");const r=Bn(t),o=`extend-chrome/storage__${e}`,s=`${o}_keys`,i=y=>`${o}--${y}`,a=y=>y.replace(`${o}--`,""),l=y=>S=>Object.keys(S).reduce((O,x)=>Object.assign(Object.assign({},O),{[y(x)]:S[x]}),{}),u=y=>y.map(i),d=l(i),f=l(a),m=async()=>(await r.get(s))[s]||[],E=y=>r.set({[s]:y});let p=null;async function h(y){if(p)return p;if(typeof y>"u"||y===null){const S=await m();if(S.length){const O=u(S),x=await r.get(O);return f(x)}else return{}}else if(typeof y=="string"){const S=i(y),O=await r.get(S);return f(O)}else if(Array.isArray(y)){const S=u(y),O=await r.get(S);return f(O)}else{const S=d(y),O=await r.get(S);return f(O)}}function w(y){if(y==null)return h();if(typeof y=="string"||typeof y=="object")return h(y);if(typeof y=="function")return h().then(y);throw new TypeError(`Unexpected argument type: ${typeof y}`)}const b=y=>y;let v=b;function T(y){return new Promise((S,O)=>{let x;typeof y=="function"?x=j=>{const M=y(j),Q=In(M);return Q?(O(new TypeError(Q)),j):Object.assign(Object.assign({},j),M)}:x=j=>Object.assign(Object.assign({},j),y);const Be=v;v=j=>Object.assign(Object.assign({},j),x(Be(j))),p===null&&(p=h().then(j=>{try{const M=v(j),Q=d(M);return Q[s]=Object.keys(M),r.set(Q).then(()=>M)}finally{v=b,p=null}})),p.then(S).catch(O)})}const B=y=>{const S=[].concat(y);S.forEach(x=>{if(typeof x!="string")throw new TypeError(`Unexpected argument type: ${typeof x}`)});const O=x=>E(x.filter(Be=>!S.includes(Be)));return r.remove(u(S)).then(m).then(O)},Kt=ut(y=>{chrome.storage.onChanged.addListener(y)},y=>{chrome.storage.onChanged.removeListener(y)}).pipe(lt(([y,S])=>S===t&&Object.keys(y).some(O=>O.startsWith(o))),ge(([y])=>{const S=Object.keys(y).filter(O=>O.startsWith(o)&&O!==s);return S.length?S.reduce((O,x)=>Object.assign(Object.assign({},O),{[a(x)]:y[x]}),{}):void 0}),lt(Dn));return{set:T,get:w,remove:B,async clear(){const y=await m(),S=[s,...u(y)];return r.remove(S)},async update(y){const S=await w(),O=await y(S);return T(O)},async getKeys(){return m()},get changeStream(){return Kt},get valueStream(){return Nn(ct(w()),Kt.pipe(Ee(()=>w())))}}}Z("local","local"),Z("sync","sync"),Z("managed","managed");const Mn=()=>{const e=Z("site-rating-bucket"),t=i=>{e.set(i)},n=async()=>await e.get()||{storage:[],isVisible:!0},r=(i,a)=>{chrome.tabs.query(i,l=>{a(l)})};return{setStorage:t,getStorage:n,sendMessage:(i,a)=>new Promise(l=>{switch(i){case"runtime":chrome.runtime.sendMessage({value:a},u=>{l(u)});break;case"tabs":r({active:!0,currentWindow:!0},u=>{chrome.tabs.sendMessage(u[0].id,{value:a},d=>{l(d)})});break}}),addListener:(i,a)=>{switch(i){case"onMessage":chrome.runtime.onMessage.addListener((l,u,d)=>a(l,u,d));break}},query:r}},$n={4:{name:"とてもいい"},3:{name:"いい"},2:{name:"わっるい"},1:{name:"とてもわっるい"},0:{name:"評価なし"}},Hn=e=>$n[e].name;function dt(e,t){return function(){return e.apply(t,arguments)}}const{toString:qn}=Object.prototype,{getPrototypeOf:Oe}=Object,ee=(e=>t=>{const n=qn.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_=e=>(e=e.toLowerCase(),t=>ee(t)===e),te=e=>t=>typeof t===e,{isArray:I}=Array,K=te("undefined");function zn(e){return e!==null&&!K(e)&&e.constructor!==null&&!K(e.constructor)&&P(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ht=_("ArrayBuffer");function Jn(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ht(e.buffer),t}const Vn=te("string"),P=te("function"),pt=te("number"),ne=e=>e!==null&&typeof e=="object",Kn=e=>e===!0||e===!1,re=e=>{if(ee(e)!=="object")return!1;const t=Oe(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wn=_("Date"),Gn=_("File"),Xn=_("Blob"),Qn=_("FileList"),Yn=e=>ne(e)&&P(e.pipe),Zn=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||P(e.append)&&((t=ee(e))==="formdata"||t==="object"&&P(e.toString)&&e.toString()==="[object FormData]"))},er=_("URLSearchParams"),tr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function W(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),I(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let a;for(r=0;r<i;r++)a=s[r],t.call(null,e[a],a,e)}}function mt(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const yt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),bt=e=>!K(e)&&e!==yt;function Ae(){const{caseless:e}=bt(this)&&this||{},t={},n=(r,o)=>{const s=e&&mt(t,o)||o;re(t[s])&&re(r)?t[s]=Ae(t[s],r):re(r)?t[s]=Ae({},r):I(r)?t[s]=r.slice():t[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&W(arguments[r],n);return t}const nr=(e,t,n,{allOwnKeys:r}={})=>(W(t,(o,s)=>{n&&P(o)?e[s]=dt(o,n):e[s]=o},{allOwnKeys:r}),e),rr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),or=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},sr=(e,t,n,r)=>{let o,s,i;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)i=o[s],(!r||r(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&Oe(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ir=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},ar=e=>{if(!e)return null;if(I(e))return e;let t=e.length;if(!pt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},cr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Oe(Uint8Array)),ur=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},lr=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},fr=_("HTMLFormElement"),dr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),wt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),hr=_("RegExp"),gt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};W(n,(o,s)=>{let i;(i=t(o,s,e))!==!1&&(r[s]=i||o)}),Object.defineProperties(e,r)},pr=e=>{gt(e,(t,n)=>{if(P(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(P(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mr=(e,t)=>{const n={},r=o=>{o.forEach(s=>{n[s]=!0})};return I(e)?r(e):r(String(e).split(t)),n},yr=()=>{},br=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Re="abcdefghijklmnopqrstuvwxyz",Et="0123456789",St={DIGIT:Et,ALPHA:Re,ALPHA_DIGIT:Re+Re.toUpperCase()+Et},wr=(e=16,t=St.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function gr(e){return!!(e&&P(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Er=e=>{const t=new Array(10),n=(r,o)=>{if(ne(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const s=I(r)?[]:{};return W(r,(i,a)=>{const l=n(i,o+1);!K(l)&&(s[a]=l)}),t[o]=void 0,s}}return r};return n(e,0)},Sr=_("AsyncFunction"),c={isArray:I,isArrayBuffer:ht,isBuffer:zn,isFormData:Zn,isArrayBufferView:Jn,isString:Vn,isNumber:pt,isBoolean:Kn,isObject:ne,isPlainObject:re,isUndefined:K,isDate:Wn,isFile:Gn,isBlob:Xn,isRegExp:hr,isFunction:P,isStream:Yn,isURLSearchParams:er,isTypedArray:cr,isFileList:Qn,forEach:W,merge:Ae,extend:nr,trim:tr,stripBOM:rr,inherits:or,toFlatObject:sr,kindOf:ee,kindOfTest:_,endsWith:ir,toArray:ar,forEachEntry:ur,matchAll:lr,isHTMLForm:fr,hasOwnProperty:wt,hasOwnProp:wt,reduceDescriptors:gt,freezeMethods:pr,toObjectSet:mr,toCamelCase:dr,noop:yr,toFiniteNumber:br,findKey:mt,global:yt,isContextDefined:bt,ALPHABET:St,generateString:wr,isSpecCompliantForm:gr,toJSONObject:Er,isAsyncFn:Sr,isThenable:e=>e&&(ne(e)||P(e))&&P(e.then)&&P(e.catch)};function g(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}c.inherits(g,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:c.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const vt=g.prototype,Ot={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ot[e]={value:e}}),Object.defineProperties(g,Ot),Object.defineProperty(vt,"isAxiosError",{value:!0}),g.from=(e,t,n,r,o,s)=>{const i=Object.create(vt);return c.toFlatObject(e,i,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),g.call(i,e.message,t,n,r,o),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const vr=null;function xe(e){return c.isPlainObject(e)||c.isArray(e)}function At(e){return c.endsWith(e,"[]")?e.slice(0,-2):e}function Rt(e,t,n){return e?e.concat(t).map(function(o,s){return o=At(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function Or(e){return c.isArray(e)&&!e.some(xe)}const Ar=c.toFlatObject(c,{},null,function(t){return/^is[A-Z]/.test(t)});function oe(e,t,n){if(!c.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=c.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,w){return!c.isUndefined(w[h])});const r=n.metaTokens,o=n.visitor||d,s=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&c.isSpecCompliantForm(t);if(!c.isFunction(o))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(c.isDate(p))return p.toISOString();if(!l&&c.isBlob(p))throw new g("Blob is not supported. Use a Buffer instead.");return c.isArrayBuffer(p)||c.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,h,w){let b=p;if(p&&!w&&typeof p=="object"){if(c.endsWith(h,"{}"))h=r?h:h.slice(0,-2),p=JSON.stringify(p);else if(c.isArray(p)&&Or(p)||(c.isFileList(p)||c.endsWith(h,"[]"))&&(b=c.toArray(p)))return h=At(h),b.forEach(function(T,B){!(c.isUndefined(T)||T===null)&&t.append(i===!0?Rt([h],B,s):i===null?h:h+"[]",u(T))}),!1}return xe(p)?!0:(t.append(Rt(w,h,s),u(p)),!1)}const f=[],m=Object.assign(Ar,{defaultVisitor:d,convertValue:u,isVisitable:xe});function E(p,h){if(!c.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+h.join("."));f.push(p),c.forEach(p,function(b,v){(!(c.isUndefined(b)||b===null)&&o.call(t,b,c.isString(v)?v.trim():v,h,m))===!0&&E(b,h?h.concat(v):[v])}),f.pop()}}if(!c.isObject(e))throw new TypeError("data must be an object");return E(e),t}function xt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Te(e,t){this._pairs=[],e&&oe(e,this,t)}const Tt=Te.prototype;Tt.append=function(t,n){this._pairs.push([t,n])},Tt.toString=function(t){const n=t?function(r){return t.call(this,r,xt)}:xt;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Rr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pt(e,t,n){if(!t)return e;const r=n&&n.encode||Rr,o=n&&n.serialize;let s;if(o?s=o(t,n):s=c.isURLSearchParams(t)?t.toString():new Te(t,n).toString(r),s){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class xr{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){c.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Ct=xr,_t={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tr={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Te,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Nt=typeof window<"u"&&typeof document<"u",Pr=(e=>Nt&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Cr=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),N={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Nt,hasStandardBrowserEnv:Pr,hasStandardBrowserWebWorkerEnv:Cr},Symbol.toStringTag,{value:"Module"})),...Tr};function _r(e,t){return oe(e,new N.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,s){return N.isNode&&c.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Nr(e){return c.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jr(e){const t={},n=Object.keys(e);let r;const o=n.length;let s;for(r=0;r<o;r++)s=n[r],t[s]=e[s];return t}function jt(e){function t(n,r,o,s){let i=n[s++];const a=Number.isFinite(+i),l=s>=n.length;return i=!i&&c.isArray(o)?o.length:i,l?(c.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!c.isObject(o[i]))&&(o[i]=[]),t(n,r,o[i],s)&&c.isArray(o[i])&&(o[i]=jr(o[i])),!a)}if(c.isFormData(e)&&c.isFunction(e.entries)){const n={};return c.forEachEntry(e,(r,o)=>{t(Nr(r),o,n,0)}),n}return null}function Fr(e,t,n){if(c.isString(e))try{return(t||JSON.parse)(e),c.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Pe={transitional:_t,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=c.isObject(t);if(s&&c.isHTMLForm(t)&&(t=new FormData(t)),c.isFormData(t))return o&&o?JSON.stringify(jt(t)):t;if(c.isArrayBuffer(t)||c.isBuffer(t)||c.isStream(t)||c.isFile(t)||c.isBlob(t))return t;if(c.isArrayBufferView(t))return t.buffer;if(c.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _r(t,this.formSerializer).toString();if((a=c.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return oe(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),Fr(t)):t}],transformResponse:[function(t){const n=this.transitional||Pe.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&c.isString(t)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?g.from(a,g.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:N.classes.FormData,Blob:N.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};c.forEach(["delete","get","head","post","put","patch"],e=>{Pe.headers[e]={}});const Ce=Pe,Lr=c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ur=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||t[n]&&Lr[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Ft=Symbol("internals");function G(e){return e&&String(e).trim().toLowerCase()}function se(e){return e===!1||e==null?e:c.isArray(e)?e.map(se):String(e)}function kr(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Ir=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function _e(e,t,n,r,o){if(c.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!c.isString(t)){if(c.isString(r))return t.indexOf(r)!==-1;if(c.isRegExp(r))return r.test(t)}}function Dr(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Br(e,t){const n=c.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,s,i){return this[r].call(this,t,o,s,i)},configurable:!0})})}class ie{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function s(a,l,u){const d=G(l);if(!d)throw new Error("header name must be a non-empty string");const f=c.findKey(o,d);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||l]=se(a))}const i=(a,l)=>c.forEach(a,(u,d)=>s(u,d,l));return c.isPlainObject(t)||t instanceof this.constructor?i(t,n):c.isString(t)&&(t=t.trim())&&!Ir(t)?i(Ur(t),n):t!=null&&s(n,t,r),this}get(t,n){if(t=G(t),t){const r=c.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return kr(o);if(c.isFunction(n))return n.call(this,o,r);if(c.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=G(t),t){const r=c.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||_e(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function s(i){if(i=G(i),i){const a=c.findKey(r,i);a&&(!n||_e(r,r[a],a,n))&&(delete r[a],o=!0)}}return c.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const s=n[r];(!t||_e(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,r={};return c.forEach(this,(o,s)=>{const i=c.findKey(r,s);if(i){n[i]=se(o),delete n[s];return}const a=t?Dr(s):String(s).trim();a!==s&&delete n[s],n[a]=se(o),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return c.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&c.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[Ft]=this[Ft]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=G(i);r[a]||(Br(o,i),r[a]=!0)}return c.isArray(t)?t.forEach(s):s(t),this}}ie.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),c.reduceDescriptors(ie.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}}),c.freezeMethods(ie);const F=ie;function Ne(e,t){const n=this||Ce,r=t||n,o=F.from(r.headers);let s=r.data;return c.forEach(e,function(a){s=a.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function Lt(e){return!!(e&&e.__CANCEL__)}function X(e,t,n){g.call(this,e??"canceled",g.ERR_CANCELED,t,n),this.name="CanceledError"}c.inherits(X,g,{__CANCEL__:!0});function Mr(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new g("Request failed with status code "+n.status,[g.ERR_BAD_REQUEST,g.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const $r=N.hasStandardBrowserEnv?{write(e,t,n,r,o,s){const i=[e+"="+encodeURIComponent(t)];c.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),c.isString(r)&&i.push("path="+r),c.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Hr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function qr(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Ut(e,t){return e&&!Hr(t)?qr(e,t):t}const zr=N.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function o(s){let i=s;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(i){const a=c.isString(i)?o(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function Jr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Vr(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,s=0,i;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),d=r[s];i||(i=u),n[o]=l,r[o]=u;let f=s,m=0;for(;f!==o;)m+=n[f++],f=f%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),u-i<t)return;const E=d&&u-d;return E?Math.round(m*1e3/E):void 0}}function kt(e,t){let n=0;const r=Vr(50,250);return o=>{const s=o.loaded,i=o.lengthComputable?o.total:void 0,a=s-n,l=r(a),u=s<=i;n=s;const d={loaded:s,total:i,progress:i?s/i:void 0,bytes:a,rate:l||void 0,estimated:l&&i&&u?(i-s)/l:void 0,event:o};d[t?"download":"upload"]=!0,e(d)}}const je={http:vr,xhr:typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,r){let o=e.data;const s=F.from(e.headers).normalize();let{responseType:i,withXSRFToken:a}=e,l;function u(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}let d;if(c.isFormData(o)){if(N.hasStandardBrowserEnv||N.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((d=s.getContentType())!==!1){const[h,...w]=d?d.split(";").map(b=>b.trim()).filter(Boolean):[];s.setContentType([h||"multipart/form-data",...w].join("; "))}}let f=new XMLHttpRequest;if(e.auth){const h=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(h+":"+w))}const m=Ut(e.baseURL,e.url);f.open(e.method.toUpperCase(),Pt(m,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function E(){if(!f)return;const h=F.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),b={data:!i||i==="text"||i==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:h,config:e,request:f};Mr(function(T){n(T),u()},function(T){r(T),u()},b),f=null}if("onloadend"in f?f.onloadend=E:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(E)},f.onabort=function(){f&&(r(new g("Request aborted",g.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new g("Network Error",g.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let w=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const b=e.transitional||_t;e.timeoutErrorMessage&&(w=e.timeoutErrorMessage),r(new g(w,b.clarifyTimeoutError?g.ETIMEDOUT:g.ECONNABORTED,e,f)),f=null},N.hasStandardBrowserEnv&&(a&&c.isFunction(a)&&(a=a(e)),a||a!==!1&&zr(m))){const h=e.xsrfHeaderName&&e.xsrfCookieName&&$r.read(e.xsrfCookieName);h&&s.set(e.xsrfHeaderName,h)}o===void 0&&s.setContentType(null),"setRequestHeader"in f&&c.forEach(s.toJSON(),function(w,b){f.setRequestHeader(b,w)}),c.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),i&&i!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",kt(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",kt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=h=>{f&&(r(!h||h.type?new X(null,e,f):h),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const p=Jr(m);if(p&&N.protocols.indexOf(p)===-1){r(new g("Unsupported protocol "+p+":",g.ERR_BAD_REQUEST,e));return}f.send(o||null)})}};c.forEach(je,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const It=e=>`- ${e}`,Kr=e=>c.isFunction(e)||e===null||e===!1,Dt={getAdapter:e=>{e=c.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let s=0;s<t;s++){n=e[s];let i;if(r=n,!Kr(n)&&(r=je[(i=String(n)).toLowerCase()],r===void 0))throw new g(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=t?s.length>1?`since :
`+s.map(It).join(`
`):" "+It(s[0]):"as no adapter specified";throw new g("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:je};function Fe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new X(null,e)}function Bt(e){return Fe(e),e.headers=F.from(e.headers),e.data=Ne.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Dt.getAdapter(e.adapter||Ce.adapter)(e).then(function(r){return Fe(e),r.data=Ne.call(e,e.transformResponse,r),r.headers=F.from(r.headers),r},function(r){return Lt(r)||(Fe(e),r&&r.response&&(r.response.data=Ne.call(e,e.transformResponse,r.response),r.response.headers=F.from(r.response.headers))),Promise.reject(r)})}const Mt=e=>e instanceof F?e.toJSON():e;function D(e,t){t=t||{};const n={};function r(u,d,f){return c.isPlainObject(u)&&c.isPlainObject(d)?c.merge.call({caseless:f},u,d):c.isPlainObject(d)?c.merge({},d):c.isArray(d)?d.slice():d}function o(u,d,f){if(c.isUndefined(d)){if(!c.isUndefined(u))return r(void 0,u,f)}else return r(u,d,f)}function s(u,d){if(!c.isUndefined(d))return r(void 0,d)}function i(u,d){if(c.isUndefined(d)){if(!c.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function a(u,d,f){if(f in t)return r(u,d);if(f in e)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,d)=>o(Mt(u),Mt(d),!0)};return c.forEach(Object.keys(Object.assign({},e,t)),function(d){const f=l[d]||o,m=f(e[d],t[d],d);c.isUndefined(m)&&f!==a||(n[d]=m)}),n}const $t="1.6.2",Le={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Le[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Ht={};Le.transitional=function(t,n,r){function o(s,i){return"[Axios v"+$t+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(t===!1)throw new g(o(i," has been removed"+(n?" in "+n:"")),g.ERR_DEPRECATED);return n&&!Ht[i]&&(Ht[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,i,a):!0}};function Wr(e,t,n){if(typeof e!="object")throw new g("options must be an object",g.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const s=r[o],i=t[s];if(i){const a=e[s],l=a===void 0||i(a,s,e);if(l!==!0)throw new g("option "+s+" must be "+l,g.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new g("Unknown option "+s,g.ERR_BAD_OPTION)}}const Ue={assertOptions:Wr,validators:Le},U=Ue.validators;class ae{constructor(t){this.defaults=t,this.interceptors={request:new Ct,response:new Ct}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=D(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&Ue.assertOptions(r,{silentJSONParsing:U.transitional(U.boolean),forcedJSONParsing:U.transitional(U.boolean),clarifyTimeoutError:U.transitional(U.boolean)},!1),o!=null&&(c.isFunction(o)?n.paramsSerializer={serialize:o}:Ue.assertOptions(o,{encode:U.function,serialize:U.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&c.merge(s.common,s[n.method]);s&&c.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=F.concat(i,s);const a=[];let l=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(l=l&&h.synchronous,a.unshift(h.fulfilled,h.rejected))});const u=[];this.interceptors.response.forEach(function(h){u.push(h.fulfilled,h.rejected)});let d,f=0,m;if(!l){const p=[Bt.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),m=p.length,d=Promise.resolve(n);f<m;)d=d.then(p[f++],p[f++]);return d}m=a.length;let E=n;for(f=0;f<m;){const p=a[f++],h=a[f++];try{E=p(E)}catch(w){h.call(this,w);break}}try{d=Bt.call(this,E)}catch(p){return Promise.reject(p)}for(f=0,m=u.length;f<m;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=D(this.defaults,t);const n=Ut(t.baseURL,t.url);return Pt(n,t.params,t.paramsSerializer)}}c.forEach(["delete","get","head","options"],function(t){ae.prototype[t]=function(n,r){return this.request(D(r||{},{method:t,url:n,data:(r||{}).data}))}}),c.forEach(["post","put","patch"],function(t){function n(r){return function(s,i,a){return this.request(D(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}ae.prototype[t]=n(),ae.prototype[t+"Form"]=n(!0)});const ce=ae;class ke{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},t(function(s,i,a){r.reason||(r.reason=new X(s,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new ke(function(o){t=o}),cancel:t}}}const Gr=ke;function Xr(e){return function(n){return e.apply(null,n)}}function Qr(e){return c.isObject(e)&&e.isAxiosError===!0}const Ie={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ie).forEach(([e,t])=>{Ie[t]=e});const Yr=Ie;function qt(e){const t=new ce(e),n=dt(ce.prototype.request,t);return c.extend(n,ce.prototype,t,{allOwnKeys:!0}),c.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return qt(D(e,o))},n}const R=qt(Ce);R.Axios=ce,R.CanceledError=X,R.CancelToken=Gr,R.isCancel=Lt,R.VERSION=$t,R.toFormData=oe,R.AxiosError=g,R.Cancel=R.CanceledError,R.all=function(t){return Promise.all(t)},R.spread=Xr,R.isAxiosError=Qr,R.mergeConfig=D,R.AxiosHeaders=F,R.formToJSON=e=>jt(c.isHTMLForm(e)?new FormData(e):e),R.getAdapter=Dt.getAdapter,R.HttpStatusCode=Yr,R.default=R;const Zr=R,eo=()=>({getRelativePosts:async t=>{const n=await Zr.get(`https://qiita.com/api/v2/items?page=1&per_page=11&query=${t}`,{headers:{"Content-Type":"application/json",Authorization:{}.VITE_QIITA_API_TOKEN}});return console.log(n.data),n.data}}),{getStorage:to,setStorage:vo,sendMessage:Oo,addListener:no}=Mn();let zt=!1;const De={rate:"siteRate"},ro={changeCurrentRate:{message:"changeCurrentRate"}},{getRelativePosts:oo}=eo(),so=e=>{const t=document.createElement("span");return t.setAttribute("class",De.rate),t.innerText=`評価:${e}`,t},io=e=>{const t=document.createElement("div");t.className="qiitaPosts";const n=document.createElement("h3");n.innerText="関連記事(Qiita上にある記事より抜粋)",t.appendChild(n),e.forEach(({url:r,title:o},s)=>{var f,m;const i=document.createElement("p");i.innerText=`${s+1}.`;const a=document.createElement("b");a.innerText=lo(o);const l=document.createElement("a");l.href=r,l.innerText=r;const u=document.createElement("hr"),d=[a,l,u];i.append(...d),(f=i.querySelector("a"))==null||f.insertAdjacentText("beforebegin","("),(m=i.querySelector("a"))==null||m.insertAdjacentText("afterend",")"),t.append(i)}),document.body.appendChild(t)},ao=e=>e.replace(`${location.protocol+"//"+location.hostname}`,"").replace(`/*${location.hash}`,""),co=async()=>await(await to()).storage,uo=async({url:e,rate:t},n)=>{var s;const r=ao(e),o=n.querySelectorAll(`[href='${e}'],[href='${r}']`);for(const i of o){(s=i.querySelector(`.${De.rate}`))==null||s.remove();const a=so(Hn(t));i.prepend(a)}},Jt=(e,t)=>{for(const n of e)uo(n,t)},lo=e=>typeof e!="string"?e:e.replace(/[&'`"<>]/g,t=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"})[t]||t),Vt=async()=>{const e=await co();Jt(e,document),ho(e).observe(document,{childList:!0,subtree:!0})},fo=(e,t)=>{for(const n of t)n.addedNodes.forEach(r=>{if(r instanceof Element){if(r.querySelectorAll(`[class=${De.rate}]`).length>0)return;Jt(e,r)}})};no("onMessage",({value:e},t,n)=>(e==ro.changeCurrentRate.message&&Vt(),!0));const ho=e=>new MutationObserver(t=>fo(e,t)),po=e=>{const t=/(.+)\】+|[一-龠]+|[ぁ-ん]+|[ァ-ヴー]+|[a-zA-Z]+|[0-9]+|[ａ-ｚＡ-Ｚ]+|[０-９]+/g;e=e.replace(" - Qiita","");const n=e.match(t);return n==null?void 0:n.reduce((r,o,s)=>{const i=s!==n.length-1;return o=o.replace(/\【|\】/g,""),r=/[一-龠]+/g.test(o)||o.length>1?r+`tag:${encodeURIComponent(o)}+stocks:>=100`:r,r=i?r+" OR ":r,r},"")};window.onload=async()=>{Vt()},window.addEventListener("scroll",async()=>{const e=document.body.clientHeight,t=window.innerHeight,n=e-t,r=window.pageYOffset+1;if(console.log(n,r),n<=r&&!zt){zt=!0;const o=await oo(po(document.title)||"");io(o)}})})();
